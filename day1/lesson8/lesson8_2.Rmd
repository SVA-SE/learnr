---
output:
    html_document:
        css: ../../style.css
---

[![Previous](../../img/previous.png)](lesson8_1.html)
[![Index](../../img/home.png)](../../index.html)
[![Next](../../img/next.png)](../../day2/lesson9/lesson9_1.html)
[![Folder](../../img/folder.png)](./)

---

# Leaflet

You can also create interactive maps that support panning, zooming and
annotations. The `leaflet` R package uses the JavaScript
[Leaflet](http://leafletjs.com/) library under the hood.

http://rstudio.github.io/leaflet/

```{r, comment = NA}
library(leaflet)

## Read farm data
farms <- read.csv("farm_level.csv")

## Create leaflet map
map <- leaflet()
map <- addTiles(map)
map <- addCircleMarkers(map,
                        lng   = farms$long,
                        lat   = farms$lat,
                        popup = paste("Herd id: ", farms$herd),
                        color = ifelse(farms$coli_vac == 1, "green", "red"),
                        fill  = TRUE)

## Plot
map
```

# Create a choropleth

http://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/administrative-units-statistical-units

For this demonstration we'll use a map (shapefile) that we downloaded
from Eurostat (Â© EuroGeographics for the administrative boundaries)
http://ec.europa.eu/eurostat/web/gisco/geodata/reference-data/administrative-units-statistical-units

We have extracted the Swedish NUTS 2 level (Nomenclature of
Territorial Units for Statistics) and added the Swedish name for each
region.

```{r, comment = NA}
library(leaflet)

## Load the map over Sweden
load("Sweden.RData")

## Create color palette with 5 levels.
pal <- colorQuantile("YlGn", NULL, n = 5)

## Create choropleth that color each region by the size of the region.
map <- leaflet(Sweden)
map <- addTiles(map)
map <- addPolygons(map,
                   fillColor = ~pal(Sweden@data$SHAPE_Area),
                   stroke = FALSE,
                   fillOpacity = 0.5,
                   smoothFactor = 0.5,
                   popup = Sweden@data$Region)

## Plot map
map
```
